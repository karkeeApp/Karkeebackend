---
apiVersion: networking.gke.io/v1beta1
kind: ManagedCertificate
metadata:
  name: karkee-certificate2
  namespace: ingress-nginx
spec:
  domains:
    - phpmyadmin.staging.karkee.biz
---
apiVersion: networking.gke.io/v1beta1
kind: ManagedCertificate
metadata:
  name: karkee-certificate3
  namespace: ingress-nginx
spec:
  domains:
    - api.staging.karkee.biz
---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  annotations:
    kubernetes.io/ingress.class: nginx
    cert-manager.io/cluster-issuer: "letsencrypt-staging"    
  name: phpmyadmin-staging-ingress
  namespace: ingress-nginx
spec:
  tls:
  - hosts:
    - phpmyadmin.staging.karkee.biz
    secretName: karkee-staging-secret
  rules:
  - host: phpmyadmin.staging.karkee.biz
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
            service:
              name: phpmyadmin-service
              port:
                number: 80
---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  annotations:
    kubernetes.io/ingress.class: nginx
    cert-manager.io/cluster-issuer: "letsencrypt-staging"    
  name: karkee-staging-ingress
  namespace: ingress-nginx
spec:
  tls:
  - hosts:
    - api.staging.karkee.biz
    secretName: karkee-staging-secret
  rules:
  - host: api.staging.karkee.biz
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
            service:
              name: mysql-service
              port:
                number: 3000